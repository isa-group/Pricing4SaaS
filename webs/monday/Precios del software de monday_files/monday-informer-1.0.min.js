(function(){window.BigBrainTrackerVersion=1,window.BigBrainJQueryPolyfill={extend:function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},ajax:function(t,e){function i(t,e){var r,s=[];for(r in t)if(t.hasOwnProperty(r)){var _=e?e+"["+r+"]":r,o=t[r];s.push(null!==o&&"object"==typeof o?i(o,_):encodeURIComponent(_)+"="+encodeURIComponent(o))}return s.join("&")}var r=new XMLHttpRequest;return r.open(e.type,t),r.setRequestHeader("Content-Type",e.contentType||"application/x-www-form-urlencoded"),r.onload=function(){r.status>=200&&r.status<300?e.success&&e.success(JSON.parse(r.responseText)):e.error&&e.error(JSON.parse(r.responseText)),e.complete&&e.complete()},r.onerror=function(){try{e.error&&e.error()}catch(t){}try{e.complete&&e.complete()}catch(t){}},"object"==typeof e.data?r.send(i(e.data)):r.send(e.data),r},get:function(t,e){return BigBrainJQueryPolyfill.ajax(t,{type:"get",success:e,contentType:"application/json"})}},window.bb_cookie={get:function(t){for(var e=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var s=i[r];" "==s.charAt(0);)s=s.substring(1,s.length);if(0==s.indexOf(e))return decodeURIComponent(s.substring(e.length,s.length))}return null},parse:function(t){var e;try{e=_.JSONDecode(_.cookie.get(t))||{}}catch(t){}return e},set:function(t,e,i,r,s,_){var o="",n="",a="";if(s||r){var u=document.location.hostname.match(/[a-z0-9][a-z0-9\-]+\.[a-z\.]{2,6}$/i),p=u?u[0]:"";o=p?"; domain=."+p:""}if(s&&(o+="; samesite=None",_=!0),i){var h=new Date;h.setTime(h.getTime()+24*i*60*60*1e3),n="; expires="+h.toGMTString()}_&&(a="; secure"),document.cookie=t+"="+encodeURIComponent(e)+n+"; path=/"+o+a},remove:function(t,e,i){window.bb_cookie.set(t,"",-1,e,i)}};var t,e,i,r,s,o=function(t,e){return function(){return t.apply(e,arguments)}},n=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};i=function(t,e){this.storage=e,this.name=t,this.length=function(t){return function(){return t.get_elements().length}}(this),this.is_empty=function(t){return function(){return 0===t.length()}}(this),this.get_elements=function(t){return function(){var e,i;e=t.storage.getItem(t.name);try{return null==e||""===e?[]:JSON.parse(e)}catch(t){throw i=t,"BigBrain tracker - Error get_elements: "+i.message+" ("+e+")"}}}(this),this.queue=function(t){return function(e){var i;return i=t.get_elements(),i.push(e),t.storage.setItem(t.name,JSON.stringify(i))}}(this),this.queue_batch=function(t){return function(e){var i,r,s,_;for(i=t.get_elements(),r=s=0,_=e.length-1;s<=_;r=s+=1)i.push(e[r]);return t.storage.setItem(t.name,JSON.stringify(i))}}(this),this.empty=function(t){return function(){var e;return e=[],t.storage.setItem(t.name,JSON.stringify(e))}}(this),this.dequeue_all=function(t){return function(){return t.dequeue(t.length())}}(this),this.dequeue=function(t){return function(e){var i,r;return null==e&&(e=1),i=t.get_elements(),0===i.length?[]:(e=Math.min(i.length,e),r=i.splice(0,e),t.storage.setItem(t.name,JSON.stringify(i)),r)}}(this)},window.queue=i,e=function(){function t(){this.getItem=o(this.getItem,this),this.setItem=o(this.setItem,this),this.memory={}}return t.prototype.setItem=function(t,e){return this.memory[t]=e},t.prototype.getItem=function(t){return this.memory[t]},t}(),window.memoryStorage=e,r=function(){var t,e,i,r;return e=function(){var t,e;for(t=1*new Date,e=0;t===1*new Date;)e+=1;return t.toString(16)+e.toString(16)},t=function(){return Math.random().toString(16).replace(".","")},i=function(){var t,e,i,r,s,_,o,n;for(o=navigator.userAgent,t=[],_=0,n=function(){return function(e,i){var r,s,_,o;for(o=0,r=s=0,_=i.length;0<=_?s<_:s>_;r=0<=_?++s:--s)o|=t[r]<<8*r;return e^o}}(),i=r=0,s=o.length;0<=s?r<s:r>s;i=0<=s?++r:--r)e=o.charCodeAt(i),t.unshift(255&e),t.length>=4&&(_=n(_,t),t=[]);return t.length>0&&(_=n(_,t)),_.toString(16)},r=(screen.height*screen.width).toString(16),e()+t()+i()+r+e()},window.BB_UUID=r,s={slug:null,sync_interval:5e3,get_visitor_id_timeout:5e3,batch_size:100,alias_timeout:5e3,methods_interval:1e3,send_immediately:!1,create_visitor:!0,cookies_enabled:!0,gradual_release:!0,gradual_release_distribution:10,is_tracker_cross_domain:!1,emit_visitor_id:!1,emit_target_origin:""},t=function(){function t(t){var e,i,r,_,n,a,u,p;null==t&&(t={}),this._add_fullStory_to_data_properties=o(this._add_fullStory_to_data_properties,this),this._set_external_visitor_id_cookie=o(this._set_external_visitor_id_cookie,this),this._add_to_properties_data=o(this._add_to_properties_data,this),this._has_slug=o(this._has_slug,this),this._is_selected_for_gradual_release=o(this._is_selected_for_gradual_release,this),this._is_local_storage_supported=o(this._is_local_storage_supported,this),this._is_spider=o(this._is_spider,this),this._get_brand=o(this._get_brand,this),this._is_iOS_device=o(this._is_iOS_device,this),this._is_android_device=o(this._is_android_device,this),this._merge_event_params=o(this._merge_event_params,this),this._log=o(this._log,this),this._tracker_state=o(this._tracker_state,this),this._init_mobile_app_properties=o(this._init_mobile_app_properties,this),this._get_referrer=o(this._get_referrer,this),this._get_experiment_id=o(this._get_experiment_id,this),this._init_propeties=o(this._init_propeties,this),this._alias=o(this._alias,this),this.set_property=o(this.set_property,this),this.set_utm_locale_id=o(this.set_utm_locale_id,this),this.set_utm_cluster_id=o(this.set_utm_cluster_id,this),this.set_user_id=o(this.set_user_id,this),this.set_account_id=o(this.set_account_id,this),this._fire_new_visit_event=o(this._fire_new_visit_event,this),this._fire_tag_manager_visitor_ready=o(this._fire_tag_manager_visitor_ready,this),this._has_no_visitor_id=o(this._has_no_visitor_id,this),this._has_no_ids=o(this._has_no_ids,this),this._get_visitor_id=o(this._get_visitor_id,this),this._get_cookie=o(this._get_cookie,this),this._set_cookie=o(this._set_cookie,this),this._update_visitor_person_id=o(this._update_visitor_person_id,this),this._update_visitor_utm_locale_id=o(this._update_visitor_utm_locale_id,this),this._update_visitor_utm_cluster_id=o(this._update_visitor_utm_cluster_id,this),this._init_time_diff=o(this._init_time_diff,this),this._get_nav_type=o(this._get_nav_type,this),this._get_timezone_offset=o(this._get_timezone_offset,this),this._get_initial_queue=o(this._get_initial_queue,this),this._remove_sent_events_from_queue=o(this._remove_sent_events_from_queue,this),this._work=o(this._work,this),this._skip_event=o(this._skip_event,this),this._raise_js_event=o(this._raise_js_event,this),this.track=o(this.track,this),this.track_many=o(this.track_many,this),this._process_data=o(this._process_data,this),this._send=o(this._send,this),this.send_all=o(this.send_all,this),this._init_ids=o(this._init_ids,this),this._emit_visitor_id=o(this._emit_visitor_id,this),this._send_hubspot_id=o(this._send_hubspot_id,this),this._send_facebook_id=o(this._send_facebook_id,this),this._execute=o(this._execute,this);try{if(this._is_spider())return function(){};for(this.VISITOR_ID_KEY="bb_visitor_id",this.EXTERNAL_VISITOR_ID_KEY="external_visitor_id",this.EXPERIMENT_VISITOR_ID_KEY="experiment_visitor_id",this.PULSE_ACCOUNT_ID_KEY="bb_pulse_account_id",this.PULSE_USER_ID_KEY="bb_pulse_user_id",this.ALIASED_KEY="bb_visitor_aliased",this.ALIASED_COUNT_KEY="bb_visitor_aliased_count",this.LAST_SENT_NEW_SESSION="last_sent_new_session",this.HUBSPOT_ID_SENT="hubspot_id_sent",this.FACEBOOK_ID_SENT="fb_id_sent",this.FACEBOOK_PERSON_ID_COOKIE="_fbp",this.FACEBOOK_CLICK_ID_COOKIE="_fbc",BigBrainJQueryPolyfill.extend(s,t),this.slug=s.slug,"https://bigbrain.me"===(u=t.bigbrain_url)||"https://data.bigbrain.me"===u||"//bigbrain.me"===u||"https://track.bigbrain.me/prod"===u||"//track.bigbrain.me/prod"===u||"//data.bigbrain.me"===u?(this.bigbrain_track_url="https://ei.monday.com/prod",this.bigbrain_visitors_url="https://vi.monday.com"):"https://tiles.io"===(p=t.bigbrain_url)||"//tiles.io"===p||"https://track.tiles.io/staging"===p||"//track.tiles.io/staging"===p||"https://track.bigbrainstaging.me/stage"===p||"//track.bigbrainstaging.me/stage"===p||"tiles.io/staging"===p?(this.bigbrain_track_url="https://ei.mondaystaging.com/stage",this.bigbrain_visitors_url="https://vi.mondaystaging.com"):(this.bigbrain_track_url=s.bigbrain_url,this.bigbrain_visitors_url=s.bigbrain_url),this.sending=!1,this.cookie_expire=3650,this.sync_interval=s.sync_interval,this.batch_size=s.batch_size,this.get_visitor_id_timeout=s.get_visitor_id_timeout,this.alias_timeout=s.alias_timeout,this.methods_interval=s.methods_interval,this.session_id=s.session_id,this.aliased=null!==this._get_cookie(this.ALIASED_KEY),e=this._get_cookie(this.ALIASED_COUNT_KEY),this.aliased_count=null===e?0:parseInt(e),this.create_visitor=s.create_visitor,this.cookies_enabled=s.cookies_enabled,this.visitor_id=null,this.experiment_visitor_id=null,this.pulse_user_id=s.pulse_user_id||null,this.pulse_account_id=s.pulse_account_id||null,this.local_storage_supported=this._is_local_storage_supported(),this.local_storage_supported?this.storage=window.localStorage:this.storage=new window.memoryStorage,this.events_queue=new window.queue("_event_tracker_queue",this.storage),this.started_plan_at=s.started_plan_at||null,this.user_created_at=s.user_created_at||null,this.account_created_at=s.account_created_at||null,this.plan_id=s.plan_id||null,this.pulse_user_serial_number=s.pulse_user_serial_number||null,this.source=s.source||null,this.is_mobile_app=s.is_mobile_app||!1,this.is_mobile_app&&(this._is_iOS_device()?this.source="mobile_app_iphone":this._is_android_device()?this.source="mobile_app_android":this.source="mobile_app_unknown"),this.is_tracker_cross_domain=t.is_tracker_cross_domain||s.is_tracker_cross_domain,this.emit_visitor_id=t.emit_visitor_id||s.emit_visitor_id,this.emit_target_origin=t.emit_target_origin||s.emit_target_origin,this._init_propeties(),this._set_external_visitor_id_cookie(),this._init_time_diff(),this._init_ids(),this.send_immediately=!1,_=this._get_initial_queue(),n=0,a=_.length;n<a;n++)i=_[n],this._execute.apply(this,i);return this.send_immediately=s.send_immediately,this.local_storage_supported||(this.send_immediately=!0,this.track("local_storage_not_supported")),this.cookies_enabled&&(this._send_hubspot_id(),this._send_facebook_id()),this._work(),this._execute}catch(t){return r=t,this._log(r),function(){}}}return t.prototype._execute=function(){var t,e,i;try{if(0===arguments.length||"_"===arguments[0].charAt(0))return;return null==this[arguments[0]]?void this._log("unsupported action: "+arguments[0]):(e=Array.prototype.slice.call(arguments),t=e.shift(),this[t].apply(null,e))}catch(t){return i=t,this._log(i)}},t.prototype._send_facebook_id=function(){var t,e,i;try{if(null!=this._get_cookie(this.FACEBOOK_ID_SENT))return;return t=200,i=setInterval(function(e){return function(){var r,s;s=e._get_cookie(e.FACEBOOK_PERSON_ID_COOKIE),r=e._get_cookie(e.FACEBOOK_CLICK_ID_COOKIE),null!=s&&(e.track("facebook_id_tracking",{info1:s,info2:r,info3:t}),e._update_visitor_person_id(s,r),e._set_cookie(e.FACEBOOK_ID_SENT,!0),clearInterval(i)),0===--t&&clearInterval(i)}}(this),1e3)}catch(t){return e=t,this._log(e)}},t.prototype._send_hubspot_id=function(){var t,e,i;try{if(null!=this._get_cookie(this.HUBSPOT_ID_SENT))return;return t=100,i=setInterval(function(e){return function(){var r;r=e._get_cookie("hubspotutk"),null!=r&&(e.track("hubspot_tracking",{info1:r}),e._set_cookie(e.HUBSPOT_ID_SENT,!0),clearInterval(i)),0===--t&&clearInterval(i)}}(this),500)}catch(t){return e=t,this._log(e)}},t.prototype._emit_visitor_id=function(){if(this.emit_visitor_id)try{return window.parent.postMessage({type:"bb_tracker_message",bb_visitor_id:this.visitor_id},this.emit_target_origin.toString())}catch(t){return t,null}},t.prototype._init_ids=function(){null===this.visitor_id&&(this.visitor_id=this._get_cookie(this.VISITOR_ID_KEY),null!==this.visitor_id&&(this._fire_tag_manager_visitor_ready(),this._emit_visitor_id())),this._has_no_visitor_id()&&this.create_visitor&&this.cookies_enabled?(this.experiment_visitor_id=this._get_cookie(this.EXPERIMENT_VISITOR_ID_KEY),this._get_visitor_id()):null!==this.visitor_id&&null!==this.pulse_user_id&&this.aliased_count<2&&this.cookies_enabled&&this._alias()},t.prototype.send_all=function(){var t;try{if(this.sending||this._has_no_ids())return;this._send(this.events_queue.get_elements())}catch(e){return t=e,this._log(t)}},t.prototype._send=function(t){var e,i,r,s,_,o;if(!this._has_no_ids()&&0!==t.length&&!this.sending){for(o=[],_=[],i=0,r=t.length;i<r&&(e=t[i],!(_.length>=this.batch_size));i++)s=e.uuid,n.call(o,s)<0&&(o.push(e.uuid),e.seconds_since_happened=parseInt((new Date).getTime()/1e3)-e.timestamp,null!=e.pulse_account_id&&""!==e.pulse_account_id||(e.pulse_account_id=this.pulse_account_id),null!=e.pulse_user_id&&""!==e.pulse_user_id||(e.pulse_user_id=this.pulse_user_id),null!=e.visitor_id&&""!==e.visitor_id||(e.visitor_id=this.visitor_id),null!=e.source&&""!==e.source||(e.source=this.source),_.push(e));this.sending=!0;try{BigBrainJQueryPolyfill.ajax(this.bigbrain_track_url+"/event",{type:"POST",data:JSON.stringify(_),contentType:"application/json",dataType:"json",success:function(t){return function(){t._remove_sent_events_from_queue(o),t.sending=!1,t.send_immediately&&t.send_all()}}(this),complete:function(t){return function(){t.sending=!1,setTimeout(t._work,t.sync_interval)}}(this)})}catch(t){t,this.sending=!1,setTimeout(this._work,this.sync_interval)}}},t.prototype._process_data=function(t,e){e.name=t,null==e.timestamp&&(e.timestamp=parseInt((new Date).getTime()/1e3)),e.uuid=window.BB_UUID(),this._add_fullStory_to_data_properties(),this._raise_js_event(t,e)},t.prototype.track_many=function(t){var e,i,r,s,_,o;for(e=[],s=0,_=t.length;s<_;s++)o=t[s],r=o[0],i=o[1],this._skip_event(r)||(this._process_data(r,i),e.push(this._merge_event_params(i)));e.length>0&&this.events_queue.queue_batch(e),this.send_immediately&&this.send_all()},t.prototype.track=function(t,e){null==e&&(e={}),this._skip_event(t)||(this._process_data(t,e),this.events_queue.queue(this._merge_event_params(e)),this.send_immediately&&this.send_all())},t.prototype._raise_js_event=function(t,e){null==e&&(e={});try{window.dispatchEvent(new CustomEvent("bigbrain-track-event",{detail:{name:t,data:e}}))}catch(t){t}},t.prototype._skip_event=function(t){var e,i;return"new_session"===t&&(e=this.storage.getItem(this.LAST_SENT_NEW_SESSION),i=parseInt((new Date).getTime()/1e3),this.storage.setItem(this.LAST_SENT_NEW_SESSION,i),null!=e&&i-parseInt(e)<1800)},t.prototype._work=function(){var t;try{if(this.sending)return;this.events_queue.get_elements().length>0?this.send_all():setTimeout(this._work,this.sync_interval)}catch(e){t=e,this._log(t)}},t.prototype._remove_sent_events_from_queue=function(t){var e,i,r,s,_,o;for(i=this.events_queue.dequeue_all(),_=[],r=0,s=i.length;r<s;r++)e=i[r],o=e.uuid,n.call(t,o)<0&&_.push(e);if(_.length>0)return this.events_queue.queue_batch(_)},t.prototype._get_initial_queue=function(){return null!=window.BigBrainQ&&window.BigBrainQ.length>0?window.BigBrainQ:[]},t.prototype._get_timezone_offset=function(){try{return(new Date).getTimezoneOffset()/60*-1}catch(t){return t,null}},t.prototype._get_nav_type=function(){try{return performance.navigation.type}catch(t){return t,null}},t.prototype._init_time_diff=function(){if(this.time_diff=(new Date).getTimezoneOffset()/60*-1,this.time_diff>0)return this.time_diff="+"+this.time_diff},t.prototype._update_visitor_utm_cluster_id=function(t){return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,utm_cluster_id:t}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._update_visitor_utm_locale_id=function(t){return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,utm_locale_id:t}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._update_visitor_person_id=function(t,e){var i;return i={person_id:t},null!=e&&(i.click_id=e),BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/update",{type:"PUT",data:JSON.stringify({visitor_id:this.visitor_id,data:i}),contentType:"application/json",dataType:"json",success:function(){return function(){}}()})},t.prototype._set_cookie=function(t,e){this.cookies_enabled&&(this.is_tracker_cross_domain?window.bb_cookie.set(t,e,this.cookie_expire,!1,!0):window.bb_cookie.set(t,e,this.cookie_expire,!0))},t.prototype._get_cookie=function(t){var e;return e=window.bb_cookie.get(t),null==e?null:e},t.prototype._get_visitor_id=function(){if(this._has_no_visitor_id())return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/create",{type:"POST",data:JSON.stringify({screen_height:this.properties.screen_height,screen_width:this.properties.screen_width,os:this.properties.os,device:this.properties.device,browser:this.properties.browser,source:this.source,marketing_campaign:this.properties.marketing_campaign,marketing_adgroup:this.properties.marketing_adgroup,marketing_campaign_id:this.properties.marketing_campaign_id,marketing_sub_id:this.properties.marketing_sub_id,marketing_source:this.properties.marketing_source,marketing_banner:this.properties.marketing_banner,marketing_medium:this.properties.marketing_medium,marketing_content:this.properties.marketing_content,marketing_retargeting:this.properties.marketing_retargeting,marketing_retargeting_id:this.properties.marketing_retargeting_id,marketing_referrer:this.properties.marketing_referrer,marketing_vertical:this.properties.marketing_vertical,marketing_landing_page:this.properties.marketing_landing_page,marketing_language:this.properties.marketing_language,aw_keyword:this.properties.aw_keyword,budget_type:this.properties.budget_type,gcl_id:this.properties.gcl_id,experiment_id:this.properties.experiment_id,os_version:this.properties.os_version,device_name:this.properties.device_name,browser_version:this.properties.browser_version,manufacturer:this.properties.manufacturer,is_wifi:this.properties.is_wifi,app_build:this.properties.app_build,app_version:this.properties.app_version,device_id:this.properties.device_id,nav_type:this.properties.nav_type,xi_time_diff:this.time_diff,experiment_visitor_id:this.experiment_visitor_id,data:this.properties.data}),contentType:"application/json",dataType:"json",success:function(t){return function(e){t.visitor_id=e.visitor_id||null,t._set_cookie(t.VISITOR_ID_KEY,t.visitor_id),t._fire_tag_manager_visitor_ready(),t._fire_new_visit_event(),t.send_all(),null!==t.visitor_id&&null!==t.pulse_user_id&&t._alias(),t._emit_visitor_id()}}(this),error:function(t){return function(){setTimeout(t._get_visitor_id,t.get_visitor_id_timeout)}}(this)})},t.prototype._has_no_ids=function(){return null===this.visitor_id&&null===this.pulse_user_id},t.prototype._has_no_visitor_id=function(){return null===this.visitor_id},t.prototype._fire_tag_manager_visitor_ready=function(){return window.dataLayer=window.dataLayer||[],window.dataLayer.push({bbVisitorId:this.visitor_id}),window.dataLayer.push({event:"bbTrackerVisitorReady"})},t.prototype._fire_new_visit_event=function(){return this.track("bb_new_device",{data:{screen_width:this.properties.screen_width,screen_height:this.properties.screen_height}})},t.prototype.set_account_id=function(t){return this.pulse_account_id=t},t.prototype.set_user_id=function(t){this.pulse_user_id=t,null!==this.pulse_user_id&&(null!==this.visitor_id?!1===this.aliased&&this._alias():setTimeout(function(){return this.set_user_id(t)}.bind(this),this.methods_interval))},t.prototype.set_utm_cluster_id=function(t){null!==this.visitor_id?this._update_visitor_utm_cluster_id(t):setTimeout(function(){return this.set_utm_cluster_id(t)}.bind(this),this.methods_interval)},t.prototype.set_utm_locale_id=function(t){null!==this.visitor_id?this._update_visitor_utm_locale_id(t):setTimeout(function(){return this.set_utm_locale_id(t)}.bind(this),this.methods_interval)},t.prototype.set_property=function(t,e){return this.properties[t]=e},t.prototype._alias=function(){if(this.cookies_enabled)return BigBrainJQueryPolyfill.ajax(this.bigbrain_visitors_url+"/api/link_visitor_to_user",{type:"POST",data:JSON.stringify({visitor:{visitor_id:this.visitor_id,pulse_user_id:this.pulse_user_id}}),contentType:"application/json",dataType:"json",success:function(t){return function(){t.aliased=!0,t._set_cookie(t.ALIASED_KEY,!0),t.aliased_count+=1,t._set_cookie(t.ALIASED_COUNT_KEY,t.aliased_count)}}(this),error:function(t){return function(){setTimeout(t._alias,t.alias_timeout)}}(this)})},t.prototype._init_propeties=function(){var t,e,i,r,s;this.properties={},this.properties.os_language=navigator.language,this.properties.user_agent=navigator.userAgent,this.properties.browser=this._browser(navigator.userAgent,navigator.vendor,window.opera),this.properties.browser_version=this._browser_version(navigator.userAgent,navigator.vendor,window.opera),this.properties.os=this._operating_system(),this.properties.device=this._device(),this.properties.screen_height=screen.height,this.properties.screen_width=screen.width,this.properties.gcl_id=this._get_query_param(document.URL,"gclid"),this.properties.marketing_referrer=this._get_referrer(),this.properties.marketing_banner=this._get_query_param(document.URL,"utm_banner")||this._get_query_param(document.URL,"marketing_banner"),this.properties.marketing_source=this._get_query_param(document.URL,"utm_source")||this._get_query_param(document.URL,"marketing_source"),this.properties.marketing_medium=this._get_query_param(document.URL,"utm_medium")||this._get_query_param(document.URL,"marketing_medium"),this.properties.marketing_vertical=this._get_query_param(document.URL,"utm_vertical")||this._get_query_param(document.URL,"marketing_vertical"),this.properties.marketing_content=this._get_query_param(document.URL,"utm_content")||this._get_query_param(document.URL,"marketing_content"),this.properties.marketing_campaign=this._get_query_param(document.URL,"utm_campaign")||this._get_query_param(document.URL,"marketing_campaign"),this.properties.marketing_adgroup=this._get_query_param(document.URL,"utm_adgroup")||this._get_query_param(document.URL,"marketing_adgroup"),this.properties.marketing_retargeting=this._get_query_param(document.URL,"utm_retargeting")||this._get_query_param(document.URL,"marketing_retargeting"),this.properties.marketing_language=this._get_query_param(document.URL,"utm_language")||this._get_query_param(document.URL,"marketing_language"),this.properties.marketing_sub_id=this._get_query_param(document.URL,"utm_sub_id")||this._get_query_param(document.URL,"marketing_sub_id"),this.properties.budget_type=this._get_query_param(document.URL,"utm_bdg")||this._get_query_param(document.URL,"marketing_bdg"),this.properties.experiment_id=this._get_experiment_id(),this.properties.tz_offset=this._get_timezone_offset(),this.properties.nav_type=this._get_nav_type(),this.properties.info3=this._get_brand(),this.properties.session_id=this.session_id,r=this._get_query_param(document.URL,"utm_keyword")||this._get_query_param(document.URL,"marketing_keyword"),this.properties.aw_keyword=r,this._add_to_properties_data("keyword",r),e=this._get_query_param(document.URL,"fbclid")||this._get_cookie(this.FACEBOOK_CLICK_ID_COOKIE)||this._get_query_param(document.URL,"gclid"),this._add_to_properties_data("click_id",e),s=this._get_cookie(this.FACEBOOK_PERSON_ID_COOKIE),this._add_to_properties_data("person_id",s),this._add_to_properties_data(this.EXTERNAL_VISITOR_ID_KEY,this._get_query_param(document.URL,"evid")),null!==this.properties.marketing_campaign&&""!==this.properties.marketing_campaign||null==this.properties.marketing_retargeting||(this.properties.marketing_campaign=this.properties.marketing_retargeting),t=this._get_query_param(document.URL,"utm_campaign_id"),null!=t&&(this.properties.marketing_campaign_id=t,null!=this.properties.marketing_retargeting&&(this.properties.marketing_retargeting_id=t)),window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),this.properties.marketing_landing_page=window.location.origin+window.location.pathname,this._init_mobile_app_properties();for(i in this.properties)null!=this.properties[i]&&""!==this.properties[i]||delete this.properties[i]},t.prototype._get_experiment_id=function(){var t;try{if(t=this._get_query_param(document.URL,"utm_expid"))return t.split(".")[1]}catch(t){t}return null},t.prototype._get_referrer=function(){return this._get_query_param(document.URL,"utm_referrer")||(this._includes(document.URL,"utm_expid")?"":document.referrer)},t.prototype._init_mobile_app_properties=function(){var t;try{window.Android&&(window.bb_mobile_properties=JSON.parse(Android.getMobileProperties()))}catch(e){t=e,this._log(t)}if(window.bb_mobile_properties)return this.properties.manufacturer=window.bb_mobile_properties.manufacturer||null,this.properties.app_build=window.bb_mobile_properties.app_build||null,this.properties.app_version=window.bb_mobile_properties.app_version||null,this.properties.device_name=window.bb_mobile_properties.device_name||null,this.properties.os_version=window.bb_mobile_properties.os_version||null,this.properties.is_wifi=window.bb_mobile_properties.is_wifi||null,this.properties.connection_type=window.bb_mobile_properties.connection_type||null,null!=window.bb_mobile_properties.os&&(this.properties.os=window.bb_mobile_properties.os),null!=window.bb_mobile_properties.source&&(this.properties.source=window.bb_mobile_properties.source),null!=window.bb_mobile_properties.device&&(this.properties.device=window.bb_mobile_properties.device),null!=window.bb_mobile_properties.screen_width&&(this.properties.screen_width=window.bb_mobile_properties.screen_width),null!=window.bb_mobile_properties.screen_height&&(this.properties.screen_height=window.bb_mobile_properties.screen_height),null!=window.bb_mobile_properties.device_id&&(this.properties.device_id=window.bb_mobile_properties.device_id),null!=window.bb_mobile_properties.visitor_id&&(this.visitor_id=window.bb_mobile_properties.visitor_id),null!=window.bb_mobile_properties.pulse_user_id&&(this.pulse_user_id=window.bb_mobile_properties.pulse_user_id),null!=window.bb_mobile_properties.pulse_account_id&&(this.pulse_account_id=window.bb_mobile_properties.pulse_account_id),null!=window.bb_mobile_properties.user_created_at&&(this.user_created_at=window.bb_mobile_properties.user_created_at),null!=window.bb_mobile_properties.account_created_at&&(this.account_created_at=window.bb_mobile_properties.account_created_at),null!=window.bb_mobile_properties.plan_id&&(this.plan_id=window.bb_mobile_properties.plan_id),null!=window.bb_mobile_properties.pulse_user_serial_number&&(this.pulse_user_serial_number=window.bb_mobile_properties.pulse_user_serial_number),this.is_mobile_app=!0},t.prototype._tracker_state=function(){var t;try{return t=this.events_queue.get_elements(),{queueLength:t.length,queueSize:this._memorySizeOf(t),isSending:this.sending}}catch(t){return{}}},t.prototype._log=function(t){var e;try{e=this._tracker_state(),console.error("BigBrainTracker:",t,e),window.Honeybadger&&Honeybadger.notify(t,{context:{BigBrainTrackerState:e}})}catch(t){}},t.prototype._merge_event_params=function(t){var e,i,r,s,_;_={},null!=this.pulse_account_id&&(_.pulse_account_id=this.pulse_account_id),null!=this.pulse_user_id&&(_.pulse_user_id=this.pulse_user_id),null!=this.visitor_id&&(_.visitor_id=this.visitor_id),null!=this.started_plan_at&&(_.started_plan_at=this.started_plan_at),null!=this.user_created_at&&(_.user_created_at=this.user_created_at),null!=this.account_created_at&&(_.account_created_at=this.account_created_at),null!=this.plan_id&&(_.plan_id=this.plan_id),null!=this.pulse_user_serial_number&&(_.pulse_user_serial_number=this.pulse_user_serial_number),null!=this.source&&(_.source=this.source),BigBrainJQueryPolyfill.extend(_,this.properties),BigBrainJQueryPolyfill.extend(_,t),s="object"==typeof this.properties.data&&null!==this.properties.data,e="object"==typeof t.data&&null!==t.data,s&&e&&(r=BigBrainJQueryPolyfill.extend({},this.properties.data),r=BigBrainJQueryPolyfill.extend(r,t.data),_.data=r);for(i in _)null!=_[i]&&""!==_[i]||delete _[i];return _},t.prototype._get_query_param=function(t,e){var i,r,s;try{return e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),r="[\\?&]"+e+"=([^&#]*)",i=new RegExp(r),s=i.exec(t),null===s||s&&"string"!=typeof s[1]&&s[1].length?null:decodeURIComponent(s[1]).replace(/\+/g," ")}catch(t){return null}},t.prototype._device=function(){var t;try{return t=navigator.userAgent,/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"windows phone":/iPad/.test(t)?"tablet":/iPod/.test(t)?"ipod touch":/iPhone/.test(t)?"mobile":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":/Android/.test(t)?"mobile":/Mac/i.test(t)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2?"tablet":/Quest/i.test(t)?"oculus":"desktop"}catch(t){return null}},t.prototype._operating_system=function(){var t;try{return t=navigator.userAgent,/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"windows":/(iPhone|iPad|iPod)/.test(t)?"ios":/Android/.test(t)?"android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":/Mac/i.test(t)?"mac":/Linux/.test(t)?"linux":""}catch(t){return null}},t.prototype._browser=function(t,e,i){try{return e=e||"",i||this._includes(t," OPR/")?this._includes(t,"Mini")?"Opera Mini":"opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"blackberry":this._includes(t,"IEMobile")||this._includes(t,"WPDesktop")?"internet explorer mobile":this._includes(t,"Edge")?"microsoft edge":this._includes(t,"FBIOS")?"facebook mobile":this._includes(t,"Chrome")?"chrome":this._includes(t,"CriOS")?"chrome ios":this._includes(e,"Apple")?this._includes(t,"Mobile")?"Mobile Safari":"safari":this._includes(t,"Android")?"android":this._includes(t,"Konqueror")?"konqueror":this._includes(t,"Firefox")?"firefox":this._includes(t,"MSIE")||this._includes(t,"Trident/")?"internet explorer":this._includes(t,"Gecko")?"mozilla":""}catch(t){return null}},t.prototype._browser_version=function(t,e,i){var r,s,_,o;try{return r=this._browser(t,e,i),(o={"internet explorer mobile":/rv:(\d+(\.\d+)?)/,"microsoft edge":/Edge\/(\d+(\.\d+)?)/,chrome:/Chrome\/(\d+(\.\d+)?)/,"chrome ios":/Chrome\/(\d+(\.\d+)?)/,safari:/Version\/(\d+(\.\d+)?)/,"mobile safari":/Version\/(\d+(\.\d+)?)/,opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,firefox:/Firefox\/(\d+(\.\d+)?)/,konqueror:/Konqueror:(\d+(\.\d+)?)/,blackberry:/BlackBerry (\d+(\.\d+)?)/,android:/android\s(\d+(\.\d+)?)/,"internet explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,mozilla:/rv:(\d+(\.\d+)?)/},(_=o[r])===undefined)?null:(s=t.match(_),s?parseFloat(s[s.length-2]):null)}catch(t){return null}},t.prototype._is_android_device=function(){var t;try{return t=navigator.userAgent.toLowerCase(),!!t.match(/(android)/)}catch(t){return null}},t.prototype._is_iOS_device=function(){var t;try{return t=navigator.userAgent.toLowerCase(),!!t.match(/(iphone|ipod|ipad)/)}catch(t){return null}},t.prototype._get_brand=function(){return/https:\/\/.*monday.com.*/i.test(window.location.href)?"monday":"dapulse"},t.prototype._is_spider=function(){return!!/(google web preview|Page Speed Insights|baiduspider|yandexbot|YandexMobileBot|Pingdom|smtbot|bingbot|pingbot|adsbot|mediapartners|facebot|facebookexternalhit|ia_archiver|exabot|sogou|duckduckbot|googlebot|yahoo! slurp|DatadogSynthetics)/i.test(navigator.userAgent)},t.prototype._includes=function(t,e){return-1!==t.indexOf(e)},t.prototype._memorySizeOf=function(t){var e,i;return e=0,i=function(t){var r,s;if(null!==t&&void 0!==t)switch(typeof t){case"number":e+=8;break;case"string":e+=2*t.length;break;case"boolean":e+=4;break;case"object":if("Object"===(s=Object.prototype.toString.call(t).slice(8,-1))||"Array"===s)for(r in t)t.hasOwnProperty(r)&&i(t[r]);else e+=2*t.toString().length}return e},function(t){return t<1024?t+" bytes":t<1048576?(t/1024).toFixed(3)+" KiB":t<1073741824?(t/1048576).toFixed(3)+" MiB":(t/1073741824).toFixed(3)+" GiB"}(i(t))},t.prototype._is_local_storage_supported=function(){try{return window.localStorage.setItem("bb_localstorage_test","test"),window.localStorage.removeItem("bb_localstorage_test"),!0}catch(t){return t,this._log("local storage not supported"),!1}},t.prototype._is_selected_for_gradual_release=function(){return s.gradual_release&&!Math.floor(Math.random()*s.gradual_release_distribution)},t.prototype._has_slug=function(){return!!s.slug},t.prototype._add_to_properties_data=function(t,e){if(this.properties&&e&&t)return this.properties.data=this.properties.data||{},this.properties.data[t]=e},
t.prototype._set_external_visitor_id_cookie=function(){if(this.properties&&this.properties.data)return this.evid=this.properties.data[this.EXTERNAL_VISITOR_ID_KEY],this.evid&&this._set_cookie(this.EXTERNAL_VISITOR_ID_KEY,this.evid)},t.prototype._add_fullStory_to_data_properties=function(){var t,e,i;try{if(i=window.FSSessionUrl||null,e=window.FSSessionStartedAt||null,null!==i)return this._add_to_properties_data("fs_session_url",i),this._add_to_properties_data("fs_session_started_at",e),!0}catch(e){return t=e,this._log(t),!1}},t}(),window.BigBrainTracker=t}).call(this);
