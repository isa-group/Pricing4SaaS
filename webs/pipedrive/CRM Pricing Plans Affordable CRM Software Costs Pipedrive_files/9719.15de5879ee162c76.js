"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9719],{69719:function(e,t,r){r.r(t),r.d(t,{InlineFormWrapper:function(){return P}});var a=r(85893),n=r(67294),l=r(11163),s=r(41222),o=r(22234),i=r(57557),c=r.n(i),u=r(92377),d=r(63150),p=r(24099),b=r(17182),m=r(93275),f=r(14870),h=r(57487),v=r(28256),g=r(83868),k=r.n(g),w=r(77829),C=r(73046),S=r(4298),E=r.n(S),x=r(30575);let y=(0,x.j)("RECAPTCHA_KEY"),P=e=>{let{children:t,optIn:r,type:i,autoSub:g,media:S,mailingList:x,className:P}=e,{translator:z}=(0,o.I)(),{language:R}=(0,d.q)(),_=(0,u.u)(),{country:L,isLoggedIn:V}=(0,p.S)(),j=(0,b.v)(),[A,N]=(0,n.useState)(""),[D,K]=(0,n.useState)(""),[q,F]=(0,n.useState)(!1),I=(0,l.useRouter)(),Z=(0,v.Ke)(),B=(0,n.useCallback)(()=>{j.show({type:f.Oo})},[j]),M=(0,n.useCallback)(()=>{j.show({type:f._k})},[j]),T=(0,n.useCallback)(async e=>{let t;if(A&&V){B();return}try{t=await grecaptcha.execute(y,{action:"submit"})}catch(e){(0,C.Z)("error",{message:"Recaptcha validation failed: ".concat(null==e?void 0:e.message)})}(0,m.l)(e,z,I,{loggedInTrigger:B,emailInUseTrigger:M,setErrors:K,track:Z},{email:A,language:R,country:L,pathInfo:_,reCaptchaToken:t,trackEvent:"ctaBlock"})},[L,A,M,V,R,B,_,I,Z,z]),U=(0,n.useCallback)(async e=>{try{return await (0,w.RL)({email:A,campaignCode:x,optIn:e,locale:I.locale})}catch(e){return(0,C.Z)("warn",{message:"Failed to subscribe user to newsletter",error:e,data:{url:I.asPath}}),{statusCode:500,errorMessage:""}}},[A,x,I.asPath,I.locale]),G=(0,n.useCallback)(()=>!!(r||(null==g?void 0:g.countries)&&(g.countries.includes(L.toUpperCase())||g.countries.includes("ALL"))),[null==g?void 0:g.countries,L,r]),H=(0,n.useCallback)(async e=>{let t=G(),{statusCode:r,errorMessage:a}=await U(t),n={subscribed:201===r,alreadySubscribed:208===r};if(n.subscribed||n.alreadySubscribed){j.show({type:f.Rk}),S&&(location.href=S),Z(f.Ms,{action:"Resource Download",list_name:x,checkbox:+t,email:A},e);return}K(a||z.gettext("Unable to subscribe to newsletter"))},[A,G,x,S,j,U,Z,z]),O=(0,n.useCallback)(e=>{if(e.preventDefault(),!A){K(z.gettext("Email should not be blank."));return}if(!k()(A)){K(z.gettext("Please enter a valid email"));return}if("newsletter"===i&&x&&"default"!==x){H(e);return}T(e)},[A,H,T,x,z,i]),Q=(0,n.useCallback)(e=>{if(!q){let e=(0,h.fb)("signup_block");Z(e.eventKey,e.properties),F(!0)}N(e.target.value),K("")},[q,Z]),W=0;n.Children.forEach(t,e=>{var t,r;n.isValidElement(e)&&((null==e?void 0:null===(t=e.props)||void 0===t?void 0:t.componentName)==="button"||(null==e?void 0:null===(r=e.props)||void 0===r?void 0:r.componentName)==="link")&&W++});let X=n.Children.map(t,e=>{if(n.isValidElement(e)){var t;let r={onChange:Q,onClick:O,errorMessage:D};return(2===W||(null===(t=e.props)||void 0===t?void 0:t.href))&&(r=c()(r,"onClick")),n.cloneElement(e,r)}return e}),Y=(0,n.useCallback)(e=>{(0,C.Z)("warn",{message:"Error loading recaptcha script in inline-from: ".concat(i),error:e})},[i]);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.a,{twoButtons:2===W,className:P,children:X}),(0,a.jsx)(E(),{src:"https://www.google.com/recaptcha/api.js?render=".concat(y),onError:Y})]})}},93275:function(e,t,r){r.d(t,{l:function(){return o}});var a=r(77829),n=r(34385),l=r(63585);let s=e=>{let t=e;return e.includes(l.Sz.LeadboosterV2)&&!e.includes(l.Sz.Prospector)?t=e.concat(l.Sz.Prospector):!e.includes(l.Sz.LeadboosterV2)&&e.includes(l.Sz.Prospector)&&(t=e.concat(l.Sz.LeadboosterV2)),t.map(e=>{let t=1;return e===l.Sz.Prospector?t=20:e===l.Sz.SmartDocV2?t=30:e===l.Sz.Campaigns&&(t=1e3),{code:e,quantity:t}})},o=async(e,t,r,l,o)=>{let{emailInUseTrigger:i,setErrors:c,track:u,setConsentError:d}=l,{email:p,language:b,country:m,pathInfo:f,trackEvent:h,selectedTier:v,packages:g,consent:k,marketingConsent:w,shareDataConsent:C,reCaptchaToken:S,minimumSeatsTestVariant:E}=o;if(e.preventDefault(),"clientX"in e&&(0,n.R)(h,e,"Email",u),!k&&d)return d(t.gettext("This option is required"));let{redirectUrl:x,emailInUse:y,invalidEmail:P,validationError:z,error:R}=await (0,a.RQ)({user:{email:p,language:b,country:m},pathInfo:f,selectedTier:v,packages:g?s(g):[],translator:t,consentGiven:k,marketingConsent:w,shareDataConsent:C,reCaptchaToken:S,minimumSeatsTestVariant:E});if(y)return c(""),i();if(P)return c(t.gettext("Please add a valid email address"));if(P||c(""),z)switch(z.errorKeyword){case"minLength":return c(t.gettext("Email is required"));case"email":return c(t.gettext("Please add a valid email address"));default:return c(t.gettext("An error occurred"))}return R?c(R):x?r.push(x):c(t.gettext("An error occurred"))}},34385:function(e,t,r){r.d(t,{R:function(){return a}});function a(e,t,r,a){a(e,{action:"provide_email",option:r},t)}}}]);